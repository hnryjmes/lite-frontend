!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}function r(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||r(t)||o(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var s="Select all",u=function(){"use strict";function e(n,r){t(this,e),this.$selectAllButton=n,this.$checkboxes=r,this.isAllSelected=!1}return n(e,[{key:"init",value:function(){var t=this;this.$selectAllButton.addEventListener("click",(function(e){return t.handleSelectAllButtonClick(e)}));var e=!0,n=!1,r=void 0;try{for(var i,o=this.$checkboxes[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){i.value.addEventListener("input",(function(){return t.setSelectAll()}))}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}this.setSelectAll()}},{key:"handleSelectAllButtonClick",value:function(t){t.preventDefault(),this.setCheckboxesChecked(!this.isAllSelected)}},{key:"setCheckboxesChecked",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=this.$checkboxes[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var l=i.value;l.checked=t,l.dispatchEvent(new Event("input"))}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"getNumChecked",value:function(){var t=0,e=!0,n=!1,r=void 0;try{for(var i,o=this.$checkboxes[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){t+=i.value.checked?1:0}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}return t}},{key:"setSelectAll",value:function(){this.getNumChecked()===this.$checkboxes.length?(this.$selectAllButton.textContent="Deselect all",this.isAllSelected=!0):(this.$selectAllButton.textContent=s,this.isAllSelected=!1)}}]),e}(),a="Show all",c=function(){"use strict";function e(n,r){t(this,e),this.$expandAllButton=n,this.$details=r,this.isAllExpanded=!1}return n(e,[{key:"init",value:function(){var t=this;this.$expandAllButton.addEventListener("click",(function(e){return t.handleExpandAllButtonClick(e)}));var e=!0,n=!1,r=void 0;try{for(var i,o=this.$details[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){i.value.addEventListener("toggle",(function(){return t.setExpandAll()}))}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}this.setExpandAll()}},{key:"handleExpandAllButtonClick",value:function(t){t.preventDefault(),this.setDetailsOpen(!this.isAllExpanded)}},{key:"setDetailsOpen",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=this.$details[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var l=i.value;l.open=t,l.dispatchEvent(new Event("toggle"))}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"getNumOpened",value:function(){var t=0,e=!0,n=!1,r=void 0;try{for(var i,o=this.$details[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){t+=i.value.open?1:0}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}return t}},{key:"setExpandAll",value:function(){this.getNumOpened()===this.$details.length?(this.$expandAllButton.textContent="Hide all",this.isAllExpanded=!0):(this.$expandAllButton.textContent=a,this.isAllExpanded=!1)}}]),e}(),d=function(){"use strict";function e(n,r,i){t(this,e),this.$checkboxes=n,this.$elementToToggleClass=r,this.toggleClass=i}return n(e,[{key:"init",value:function(){var t=this,e=!0,n=!1,r=void 0;try{for(var i,o=this.$checkboxes[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){i.value.addEventListener("input",(function(e){return t.handleCheckboxInput(e)}))}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}this.setClass()}},{key:"handleCheckboxInput",value:function(){this.setClass()}},{key:"getNumChecked",value:function(){var t=0,e=!0,n=!1,r=void 0;try{for(var i,o=this.$checkboxes[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){t+=i.value.checked?1:0}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}return t}},{key:"setClass",value:function(){var t=0===this.getNumChecked();this.$elementToToggleClass.classList.toggle(this.toggleClass,t)}}]),e}(),h=function(){"use strict";function e(n){t(this,e),this.$headline=n}return n(e,[{key:"getText",value:function(t){if(1===t.length){var e=t[0].name;return"Assessing ".concat(e)}return"Assessing ".concat(t.length," products")}},{key:"setProducts",value:function(t){this.$headline.textContent=this.getText(t)}}]),e}(),f=function(){"use strict";function e(n,r,i){t(this,e),this.$checkboxes=n,this.onSelectProducts=i,this.products={};var o=!0,l=!1,s=void 0;try{for(var u,a=r[Symbol.iterator]();!(o=(u=a.next()).done);o=!0){var c=u.value;this.products[c.id]=c}}catch(t){l=!0,s=t}finally{try{o||null==a.return||a.return()}finally{if(l)throw s}}}return n(e,[{key:"init",value:function(){var t=this,e=!0,n=!1,r=void 0;try{for(var i,o=this.$checkboxes[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){i.value.addEventListener("input",(function(){t.onSelectProducts(t.getSelectedProducts())}))}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}this.onSelectProducts(this.getSelectedProducts())}},{key:"getSelectedProducts",value:function(){var t=[],e=!0,n=!1,r=void 0;try{for(var i,o=this.$checkboxes[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var l=i.value;l.checked&&t.push(this.products[l.value])}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}return t}}]),e}(),v=function(){"use strict";function e(){t(this,e),this.suggestions=[],this.seenExporterSuggestions=new Set,this.seenAssessedSuggestions=new Set}return n(e,[{key:"getSuggestionKey",value:function(t){return t.sort().join("|")}},{key:"addSuggestion",value:function(t,e,n){var r=this.getSuggestionKey(e);t.has(r)||(t.add(r),this.suggestions.push([e,n]))}},{key:"addExporterSuggestion",value:function(t,e){this.addSuggestion(this.seenExporterSuggestions,t,e)}},{key:"addAssessedSuggestion",value:function(t,e){this.addSuggestion(this.seenAssessedSuggestions,t,e)}}]),e}(),y=function(){"use strict";function e(n,r){t(this,e),this.$suggestionsContainer=n,this.onSelectSuggestions=r}return n(e,[{key:"getSuggestionButton",value:function(t){var e=document.createElement("button");return e.classList.add("lite-button--link"),e.textContent=t,e}},{key:"getSuggestionText",value:function(t){return t.join(", ")}},{key:"getExporterSuggestionText",value:function(t){var e=this.getSuggestionText(t);return"Select exporter suggestion ".concat(e)}},{key:"getAssessedSuggestionText",value:function(t){var e=this.getSuggestionText(t);return"Copy previous assessment ".concat(e)}},{key:"getSuggestions",value:function(t){var e=new v,n=!0,r=!1,i=void 0;try{for(var o,l=t[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var s=o.value.controlListEntries,u=s.exporter,a=s.precedents;u&&u.length>0&&e.addExporterSuggestion(u,this.getExporterSuggestionText(u));var c=!0,d=!1,h=void 0;if(a)try{for(var f,y=a[Symbol.iterator]();!(c=(f=y.next()).done);c=!0){var g=f.value;g.length&&e.addAssessedSuggestion(g,this.getAssessedSuggestionText(g))}}catch(t){d=!0,h=t}finally{try{c||null==y.return||y.return()}finally{if(d)throw h}}}}catch(t){r=!0,i=t}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return e.suggestions}},{key:"setProducts",value:function(t){this.$suggestionsContainer.innerHTML="";var e=this.getSuggestions(t),n=!0,r=!1,i=void 0;try{for(var o,s=this,u=function(t,e){var n=l(e.value,2),r=n[0],i=n[1],o=s,u=s.getSuggestionButton(i);u.addEventListener("click",(function(t){return o.handleSuggestionButtonClick(t,r)})),s.$suggestionsContainer.append(u)},a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)u(0,o)}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}},{key:"handleSuggestionButtonClick",value:function(t,e){t.preventDefault(),this.onSelectSuggestions(e)}}]),e}(),g=function(){"use strict";function e(n){t(this,e),this.controlListEntriesSelector=n}return n(e,[{key:"setSuggestions",value:function(t){document.querySelector(this.controlListEntriesSelector).tokenfield.addItems(t.map((function(t){return{id:t,name:t}})))}}]),e}(),S=function(){"use strict";function e(n,r){t(this,e),this.controlListEntriesSelector=n,this.$noControlListCheckbox=r}return n(e,[{key:"init",value:function(){var t=this;this.$noControlListCheckbox.addEventListener("input",(function(e){return t.handleNoControlListCheckboxInput(e)}))}},{key:"emptyTokenField",value:function(){document.querySelector(this.controlListEntriesSelector).tokenfield.emptyItems()}},{key:"displayNoCLEEntry",value:function(){var t=this,e=document.querySelector(this.controlListEntriesSelector);e.querySelector(".tokenfield-input").style.display="none";var n=e.querySelector(".tokenfield-set ul"),r=document.createElement("li");r.classList.add("tokenfield-set-item","tau-none-item");var i=document.createElement("span");i.classList.add("item-label"),i.textContent="None";var o=document.createElement("a");o.classList.add("item-remove"),o.tabIndex=-1,o.textContent="Ã—",o.addEventListener("click",(function(){t.setCheckbox(!1)})),r.append(i,o),n.appendChild(r)}},{key:"removeNoCLEEntry",value:function(){var t=document.querySelector(this.controlListEntriesSelector);t.querySelector(".tokenfield-input").style.removeProperty("display");var e=t.querySelector(".tokenfield-set .tau-none-item");null==e||e.remove()}},{key:"handleNoControlListCheckboxInput",value:function(){this.$noControlListCheckbox.checked?(this.emptyTokenField(),this.displayNoCLEEntry()):this.removeNoCLEEntry()}},{key:"setCheckbox",value:function(t){this.$noControlListCheckbox.checked=t,this.$noControlListCheckbox.dispatchEvent(new Event("input"))}},{key:"reset",value:function(){this.setCheckbox(!1)}}]),e}();!function(){var t=document.querySelector("#div_id_goods");if(t){var e=function(t){var e=document.createElement("div");return e.classList.add("tau__first-column--options"),t.insertBefore(e,t.firstElementChild.nextElementSibling),e}(t),n=function(t){var e=document.createElement("button");e.innerText=s,e.classList.add("lite-button--link","tau__select-all");var n=t.querySelectorAll("[name=goods]");return new u(e,n).init(),e}(t),r=function(t){var e=document.createElement("button");e.innerText=a,e.classList.add("lite-button--link");var n=t.querySelectorAll(".govuk-details");return new c(e,n).init(),e}(t);e.append(n,r)}}(),function(){var t=document.querySelector("#div_id_goods");if(t){var e=t.querySelectorAll("[name=goods]"),n=document.querySelector(".tau__second-column");new d(e,n,"tau__second-column--hide").init()}}(),function(){var t=document.querySelector(".tau__headline"),e=new h(t),n=document.querySelector("[name=does_not_have_control_list_entries]"),r=new S("#control_list_entries",n);r.init();var i=new g("#control_list_entries"),o=document.querySelector(".tau__cle-suggestions"),l=new y(o,(function(t){i.setSuggestions(t),r.reset()})),s=document.querySelector("#div_id_goods").querySelectorAll("[name=goods]"),u=JSON.parse(document.querySelector("#cle-suggestions-json").textContent);new f(s,u,(function(t){e.setProducts(t),l.setProducts(t)})).init()}()}();
//# sourceMappingURL=tau.js.map
