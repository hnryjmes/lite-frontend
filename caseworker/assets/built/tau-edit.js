!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function n(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}function o(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function i(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||o(t)||i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u=function(){"use strict";function e(n,o){t(this,e),this.controlListEntriesSelector=n,this.$noControlListCheckbox=o}return n(e,[{key:"init",value:function(){var t=this;this.$noControlListCheckbox.addEventListener("input",(function(e){return t.handleNoControlListCheckboxInput(e)}))}},{key:"emptyTokenField",value:function(){document.querySelector(this.controlListEntriesSelector).tokenfield.emptyItems()}},{key:"displayNoCLEEntry",value:function(){var t=this,e=document.querySelector(this.controlListEntriesSelector);e.querySelector(".tokenfield-input").style.display="none";var n=e.querySelector(".tokenfield-set ul"),o=document.createElement("li");o.classList.add("tokenfield-set-item","tau-none-item");var r=document.createElement("span");r.classList.add("item-label"),r.textContent="None";var i=document.createElement("a");i.classList.add("item-remove"),i.tabIndex=-1,i.textContent="Ã—",i.addEventListener("click",(function(){t.setCheckbox(!1)})),o.append(r,i),n.appendChild(o)}},{key:"removeNoCLEEntry",value:function(){var t=document.querySelector(this.controlListEntriesSelector);t.querySelector(".tokenfield-input").style.removeProperty("display");var e=t.querySelector(".tokenfield-set .tau-none-item");null==e||e.remove()}},{key:"handleNoControlListCheckboxInput",value:function(){this.$noControlListCheckbox.checked?(this.emptyTokenField(),this.displayNoCLEEntry()):this.removeNoCLEEntry()}},{key:"setCheckbox",value:function(t){this.$noControlListCheckbox.checked=t,this.$noControlListCheckbox.dispatchEvent(new Event("input"))}},{key:"reset",value:function(){this.setCheckbox(!1)}}]),e}(),a=function(){"use strict";function e(){t(this,e),this.suggestions=[],this.seenExporterSuggestions=new Set,this.seenAssessedSuggestions=new Set}return n(e,[{key:"getSuggestionKey",value:function(t){return t.map((function(t){return t.id})).sort().join("|")}},{key:"addSuggestion",value:function(t,e,n){var o=this.getSuggestionKey(e);t.has(o)||(t.add(o),this.suggestions.push([e,n]))}},{key:"addExporterSuggestion",value:function(t,e){this.addSuggestion(this.seenExporterSuggestions,t,e)}},{key:"addAssessedSuggestion",value:function(t,e){this.addSuggestion(this.seenAssessedSuggestions,t,e)}}]),e}(),l=function(){"use strict";function e(n,o){t(this,e),this.$suggestionsContainer=n,this.onSelectSuggestions=o}return n(e,[{key:"getSuggestionButton",value:function(t){var e=document.createElement("button");return e.classList.add("lite-button--link"),e.textContent=t,e}},{key:"getSuggestionText",value:function(t){return t.map((function(t){return t.rating})).join(", ")}},{key:"getExporterSuggestionText",value:function(t){var e=this.getSuggestionText(t);return"Select exporter suggestion ".concat(e)}},{key:"getAssessedSuggestionText",value:function(t){var e=this.getSuggestionText(t);return"Copy previous assessment ".concat(e)}},{key:"getSuggestions",value:function(t){var e=new a,n=!0,o=!1,r=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var u=i.value.controlListEntries,l=u.exporter,c=u.assessed;l&&l.length>0&&e.addExporterSuggestion(l,this.getExporterSuggestionText(l));var g=!0,d=!1,f=void 0;if(c)try{for(var y,h=c[Symbol.iterator]();!(g=(y=h.next()).done);g=!0){var v=y.value;e.addAssessedSuggestion(v,this.getAssessedSuggestionText(v))}}catch(t){d=!0,f=t}finally{try{g||null==h.return||h.return()}finally{if(d)throw f}}}}catch(t){o=!0,r=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw r}}return e.suggestions}},{key:"setProducts",value:function(t){this.$suggestionsContainer.innerHTML="";var e=this.getSuggestions(t),n=!0,o=!1,r=void 0;try{for(var i,u=this,a=function(t,e){var n=s(e.value,2),o=n[0],r=n[1],i=u,a=u.getSuggestionButton(r);a.addEventListener("click",(function(t){return i.handleSuggestionButtonClick(t,o)})),u.$suggestionsContainer.append(a)},l=e[Symbol.iterator]();!(n=(i=l.next()).done);n=!0)a(0,i)}catch(t){o=!0,r=t}finally{try{n||null==l.return||l.return()}finally{if(o)throw r}}}},{key:"handleSuggestionButtonClick",value:function(t,e){t.preventDefault(),this.onSelectSuggestions(e)}}]),e}(),c=function(){"use strict";function e(n){t(this,e),this.controlListEntriesSelector=n}return n(e,[{key:"setSuggestions",value:function(t){document.querySelector(this.controlListEntriesSelector).tokenfield.addItems(t.map((function(t){var e=t.rating;return{id:e,name:e}})))}}]),e}();!function(){var t=document.querySelector("[name=does_not_have_control_list_entries]"),e=new u("#control_list_entries",t);e.init();var n=new c("#control_list_entries"),o=document.querySelector(".tau__cle-suggestions"),r=new l(o,(function(t){n.setSuggestions(t),e.reset()})),i=JSON.parse(document.querySelector("#cle-suggestions-json").textContent);r.setProducts(i)}()}();
//# sourceMappingURL=tau-edit.js.map
