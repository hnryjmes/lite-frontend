!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}function o(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function i(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||o(e)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u=function(){"use strict";function t(n,o){e(this,t),this.controlListEntriesSelector=n,this.$noControlListCheckbox=o}return n(t,[{key:"init",value:function(){var e=this;this.$noControlListCheckbox.addEventListener("input",(function(t){return e.handleNoControlListCheckboxInput(t)}))}},{key:"emptyTokenField",value:function(){document.querySelector(this.controlListEntriesSelector).tokenfield.emptyItems()}},{key:"displayNoCLEEntry",value:function(){var e=this,t=document.querySelector(this.controlListEntriesSelector);t.querySelector(".tokenfield-input").style.display="none";var n=t.querySelector(".tokenfield-set ul"),o=document.createElement("li");o.classList.add("tokenfield-set-item","tau-none-item");var r=document.createElement("span");r.classList.add("item-label"),r.textContent="None";var i=document.createElement("a");i.classList.add("item-remove"),i.tabIndex=-1,i.textContent="Ã—",i.addEventListener("click",(function(){e.setCheckbox(!1)})),o.append(r,i),n.appendChild(o)}},{key:"removeNoCLEEntry",value:function(){var e=document.querySelector(this.controlListEntriesSelector);e.querySelector(".tokenfield-input").style.removeProperty("display");var t=e.querySelector(".tokenfield-set .tau-none-item");null==t||t.remove()}},{key:"handleNoControlListCheckboxInput",value:function(){this.$noControlListCheckbox.checked?(this.emptyTokenField(),this.displayNoCLEEntry()):this.removeNoCLEEntry()}},{key:"setCheckbox",value:function(e){this.$noControlListCheckbox.checked=e,this.$noControlListCheckbox.dispatchEvent(new Event("input"))}},{key:"reset",value:function(){this.setCheckbox(!1)}}]),t}(),l=function(){"use strict";function t(){e(this,t),this.suggestions=[],this.seenExporterSuggestions=new Set,this.seenAssessedSuggestions=new Set}return n(t,[{key:"getSuggestionKey",value:function(e){return e.sort().join("|")}},{key:"addSuggestion",value:function(e,t,n){var o=this.getSuggestionKey(t);e.has(o)||(e.add(o),this.suggestions.push([t,n]))}},{key:"addExporterSuggestion",value:function(e,t){this.addSuggestion(this.seenExporterSuggestions,e,t)}},{key:"addAssessedSuggestion",value:function(e,t){this.addSuggestion(this.seenAssessedSuggestions,e,t)}}]),t}(),a=function(){"use strict";function t(n,o){e(this,t),this.$suggestionsContainer=n,this.onSelectSuggestions=o}return n(t,[{key:"getSuggestionButton",value:function(e){var t=document.createElement("button");return t.classList.add("lite-button--link"),t.textContent=e,t}},{key:"getSuggestionText",value:function(e){return e.join(", ")}},{key:"getExporterSuggestionText",value:function(e){var t=this.getSuggestionText(e);return"Select exporter suggestion ".concat(t)}},{key:"getAssessedSuggestionText",value:function(e){var t=this.getSuggestionText(e);return"Copy previous assessment ".concat(t)}},{key:"getSuggestions",value:function(e){var t=new l,n=!0,o=!1,r=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var u=i.value.controlListEntries,a=u.exporter,c=u.precedents;a&&a.length>0&&t.addExporterSuggestion(a,this.getExporterSuggestionText(a));var g=!0,d=!1,f=void 0;if(c)try{for(var y,h=c[Symbol.iterator]();!(g=(y=h.next()).done);g=!0){var v=y.value;v.length&&t.addAssessedSuggestion(v,this.getAssessedSuggestionText(v))}}catch(e){d=!0,f=e}finally{try{g||null==h.return||h.return()}finally{if(d)throw f}}}}catch(e){o=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw r}}return t.suggestions}},{key:"setProducts",value:function(e){this.$suggestionsContainer.innerHTML="";var t=this.getSuggestions(e),n=!0,o=!1,r=void 0;try{for(var i,u=this,l=function(e,t){var n=s(t.value,2),o=n[0],r=n[1],i=u,l=u.getSuggestionButton(r);l.addEventListener("click",(function(e){return i.handleSuggestionButtonClick(e,o)})),u.$suggestionsContainer.append(l)},a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0)l(0,i)}catch(e){o=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw r}}}},{key:"handleSuggestionButtonClick",value:function(e,t){e.preventDefault(),this.onSelectSuggestions(t)}}]),t}(),c=function(){"use strict";function t(n){e(this,t),this.controlListEntriesSelector=n}return n(t,[{key:"setSuggestions",value:function(e){document.querySelector(this.controlListEntriesSelector).tokenfield.addItems(e.map((function(e){return{id:e,name:e}})))}}]),t}();!function(){var e=document.querySelector("[name=does_not_have_control_list_entries]"),t=new u("#control_list_entries",e);t.init();var n=new c("#control_list_entries"),o=document.createElement("div");o.classList.add("tau__cle-suggestions");var r=document.querySelector("[for=control_list_entries]");r.parentNode.insertBefore(o,r.nextSibling);var i=new a(o,(function(e){n.setSuggestions(e),t.reset()})),s=JSON.parse(document.querySelector("#cle-suggestions-json").textContent);i.setProducts(s)}()}();
//# sourceMappingURL=tau-edit.js.map
