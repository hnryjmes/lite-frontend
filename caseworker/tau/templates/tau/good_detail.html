{% load advice_tags tau_tags %}
<details class="govuk-details" data-module="govuk-details">
    <summary class="govuk-details__summary">
        <span class="govuk-details__summary-text">{{ good.good.name }}</span>
    </summary>
    <div class="govuk-details__text">
      <table id="table-products-{{ forloop.counter }}" class="govuk-table">
        <tbody class="govuk-table__body">
          <tr class="govuk-table__row">
            <td class="govuk-table__header">Select the type of firearm product</td>
            <td class="govuk-table__cell">{{good.good.firearm_details.type.value}}</td>
          </tr>
          <tr class="govuk-table__row">
            <td class="govuk-table__header">Part number (optional)</td>
            <td class="govuk-table__cell">{{ good.good.part_number }}</td>
          </tr>
          <tr class="govuk-table__row">
            <td class="govuk-table__header">Does the product have a government security grading or classification?</td>
            <td class="govuk-table__cell">{{ good.good.is_pv_graded|title }}</td>
          </tr>
          <tr class="govuk-table__row">
            <td class="govuk-table__header">Is the product for military use?</td>
            <td class="govuk-table__cell">{{ good.good.is_military_use.value }}</td>
          </tr>
          <tr class="govuk-table__row">
            <td class="govuk-table__header">Will the product be onward exported to any additional countries?</td>
            <td class="govuk-table__cell">{{ case.destinations|is_ultimate_end_user|yesno|capfirst }}</td>
          </tr>
          <tr class="govuk-table__row">
            <td class="govuk-table__header">Quantity</td>
            <td class="govuk-table__cell">{{ good.quantity|floatformat:"0" }}</td>
          </tr>
          <tr class="govuk-table__row">
            <td class="govuk-table__header">Total value</td>
            <td class="govuk-table__cell">Â£{{ case.goods | get_case_value }}</td>
          </tr>
        </tbody>
      </table>
      {% if good.precedent %}
      <table id="table-precedents-{{ forloop.counter }}" class="govuk-table" style="background-color: #f3f2f1">
        <tbody class="govuk-table__body">
          <h3>Precedents (most recent)</h3>
          <tr class="govuk-table__row">
            <td class="govuk-table__header">Reference</td>
            <td class="govuk-table__cell"><a href="{% url 'cases:case' good.precedent.queue good.precedent.application %}">{{ good.precedent.reference }}</a></td>
          </tr>
          <tr class="govuk-table__row">
            <td class="govuk-table__header">Control list entry</td>
            <td class="govuk-table__cell">{{ good.precedent.control_list_entries | join:", " }}</td>
          </tr>
          <tr class="govuk-table__row">
            <td class="govuk-table__header">Regime</td>
            <td class="govuk-table__cell">{% if good.precedent.wassenaar %}WASSENAAR{% endif %}</td>
          </tr>
          <tr class="govuk-table__row">
            <td class="govuk-table__header">Report summary</td>
            <td class="govuk-table__cell">{{ good.precedent.report_summary }}</td>
          </tr>
          <tr class="govuk-table__row">
            <td class="govuk-table__header">Quantity</td>
            <td class="govuk-table__cell">{{ good.precedent.quantity|floatformat:"0" }}</td>
          </tr>
          <tr class="govuk-table__row">
            <td class="govuk-table__header">Destinations</td>
            <td class="govuk-table__cell">{{ good.precedent.destinations | join:", " }}</td>
          </tr>
        </tbody>
      </table>
      {% endif %}
    </div>
  </details>
