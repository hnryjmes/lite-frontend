{"mappings":"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","sources":["node_modules/@swc/helpers/src/_create_class.js","node_modules/@swc/helpers/src/_iterable_to_array.js","node_modules/@swc/helpers/src/_array_like_to_array.js","node_modules/@swc/helpers/src/_unsupported_iterable_to_array.js","node_modules/@swc/helpers/src/_sliced_to_array.js","node_modules/@swc/helpers/src/_array_with_holes.js","node_modules/@swc/helpers/src/_non_iterable_rest.js","core/assets/javascripts/cookies/consts.js","core/assets/javascripts/cookies/utils.js","core/assets/javascripts/cookies/preferences.js","node_modules/@swc/helpers/src/_class_call_check.js","exporter/assets/javascripts/cookie-policy-form.js"],"sourcesContent":["function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\n","import _arrayLikeToArray from './_array_like_to_array';\n\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))\n    return _arrayLikeToArray(o, minLen);\n}\n","import arrayWithHoles from './_array_with_holes';\nimport iterableToArrayLimit from './_iterable_to_array';\nimport nonIterableRest from './_non_iterable_rest';\nimport unsupportedIterableToArray from './_unsupported_iterable_to_array';\n\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n","const POLICY_COOKIE_NAME = \"cookies_policy\";\r\nconst POLICY_COOKIE_DURATION_DAYS = 365;\r\n\r\nconst PREFERENCES_COOKIE_NAME = \"cookie_preferences_set\";\r\nconst PREFERENCES_COOKIE_DURATION_DAYS = 365;\r\n\r\nexport {\r\n  POLICY_COOKIE_NAME,\r\n  POLICY_COOKIE_DURATION_DAYS,\r\n  PREFERENCES_COOKIE_NAME,\r\n  PREFERENCES_COOKIE_DURATION_DAYS,\r\n};\r\n","import {\r\n  PREFERENCES_COOKIE_NAME,\r\n  PREFERENCES_COOKIE_DURATION_DAYS,\r\n  POLICY_COOKIE_NAME,\r\n  POLICY_COOKIE_DURATION_DAYS,\r\n} from \"./consts\";\r\n\r\nconst getCookie = (name) => {\r\n  const nameEQ = name + \"=\";\r\n  const cookies = document.cookie.split(\";\");\r\n  for (let i = 0, len = cookies.length; i < len; i++) {\r\n    let cookie = cookies[i];\r\n    while (cookie.charAt(0) === \" \") {\r\n      cookie = cookie.substring(1, cookie.length);\r\n    }\r\n    if (cookie.indexOf(nameEQ) === 0) {\r\n      return decodeURIComponent(cookie.substring(nameEQ.length));\r\n    }\r\n  }\r\n  return null;\r\n};\r\n\r\nconst setCookie = (name, value, options) => {\r\n  if (typeof options === \"undefined\") {\r\n    options = {};\r\n  }\r\n  let cookieString = name + \"=\" + value + \"; path=/\";\r\n  if (options.days) {\r\n    let date = new Date();\r\n    date.setTime(date.getTime() + options.days * 24 * 60 * 60 * 1000);\r\n    cookieString = cookieString + \"; expires=\" + date.toGMTString();\r\n  }\r\n  if (document.location.protocol === \"https:\") {\r\n    cookieString = cookieString + \"; Secure\";\r\n  }\r\n  document.cookie = cookieString;\r\n};\r\n\r\nconst getDefaultPolicy = () => ({\r\n  essential: true,\r\n  settings: false,\r\n  usage: false,\r\n  campaigns: false,\r\n});\r\n\r\nconst setPoliciesCookie = (settings, usage, campaigns) => {\r\n  const policy = getDefaultPolicy();\r\n  policy.settings = settings || false;\r\n  policy.usage = usage || false;\r\n  policy.campaigns = campaigns || false;\r\n\r\n  const json = JSON.stringify(policy);\r\n  setCookie(POLICY_COOKIE_NAME, json, { days: POLICY_COOKIE_DURATION_DAYS });\r\n\r\n  return policy;\r\n};\r\n\r\nconst setPreferencesCookie = () => {\r\n  setCookie(PREFERENCES_COOKIE_NAME, \"true\", {\r\n    days: PREFERENCES_COOKIE_DURATION_DAYS,\r\n  });\r\n};\r\n\r\nexport {\r\n  getCookie,\r\n  setCookie,\r\n  getDefaultPolicy,\r\n  setPoliciesCookie,\r\n  setPreferencesCookie,\r\n};\r\n","import { POLICY_COOKIE_NAME } from \"./consts\";\r\nimport {\r\n  getCookie,\r\n  getDefaultPolicy,\r\n  setPoliciesCookie,\r\n  setPreferencesCookie,\r\n} from \"./utils\";\r\n\r\nclass CookiePreferences {\r\n  constructor(formSelector, confirmationSelector, radioButtons) {\r\n    this.formSelector = formSelector;\r\n    this.confirmationSelector = confirmationSelector;\r\n    this.radioButtons = radioButtons;\r\n\r\n    this.form = document.querySelector(this.formSelector);\r\n  }\r\n\r\n  boolToValue(b) {\r\n    return b ? \"on\" : \"off\";\r\n  }\r\n\r\n  valueToBool(value) {\r\n    return value === \"on\";\r\n  }\r\n\r\n  getPolicyOrDefault() {\r\n    const cookie = getCookie(POLICY_COOKIE_NAME);\r\n    const policy = getDefaultPolicy();\r\n\r\n    if (!cookie) return policy;\r\n\r\n    try {\r\n      const parsed = JSON.parse(cookie);\r\n\r\n      policy.campaigns = parsed.campaigns || false;\r\n      policy.usage = parsed.usage || false;\r\n      policy.settings = parsed.settings || false;\r\n    } catch (e) {\r\n      return policy;\r\n    }\r\n\r\n    return policy;\r\n  }\r\n\r\n  initFormValues() {\r\n    const policy = this.getPolicyOrDefault();\r\n\r\n    Object.entries(this.radioButtons).forEach(([cookieKey, inputName]) => {\r\n      this.form[inputName].value = this.boolToValue(policy[cookieKey]);\r\n    });\r\n  }\r\n\r\n  setPoliciesCookie() {\r\n    const policy = {\r\n      settings: false,\r\n      usage: false,\r\n      campaigns: false,\r\n    };\r\n\r\n    Object.entries(this.radioButtons).forEach(([cookieKey, inputName]) => {\r\n      policy[cookieKey] = this.valueToBool(this.form[inputName].value);\r\n    });\r\n\r\n    setPoliciesCookie(policy.settings, policy.usage, policy.campaigns);\r\n  }\r\n\r\n  displayConfirmation() {\r\n    const confirmationEl = document.querySelector(this.confirmationSelector);\r\n\r\n    confirmationEl.style.display = \"block\";\r\n  }\r\n\r\n  bindForm() {\r\n    this.form.addEventListener(\"submit\", (evt) => {\r\n      evt.preventDefault();\r\n\r\n      this.setPoliciesCookie();\r\n      setPreferencesCookie();\r\n      this.displayConfirmation();\r\n\r\n      window.scrollTo(0, 0);\r\n\r\n      return false;\r\n    });\r\n  }\r\n}\r\n\r\nconst initCookiePreferences = (\r\n  formSelector,\r\n  confirmationSelector,\r\n  radioButtons\r\n) => {\r\n  const cookiePreferences = new CookiePreferences(\r\n    formSelector,\r\n    confirmationSelector,\r\n    radioButtons\r\n  );\r\n\r\n  cookiePreferences.initFormValues();\r\n  cookiePreferences.bindForm();\r\n};\r\n\r\nexport default initCookiePreferences;\r\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","import initCookiePreferences from \"../../../core/assets/javascripts/cookies/preferences.js\";\r\n\r\ninitCookiePreferences(\r\n  \"#cookie-preferences-form\",\r\n  \".cookie-settings__confirmation\",\r\n  {\r\n    usage: \"cookies-usage\",\r\n  }\r\n);\r\n"],"names":["$9585434c2c66a7c0$var$_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","$95777fde86c7127f$export$2e2bcd8739ae039","iter","Symbol","iterator","Array","from","$3fbed69e34546862$export$2e2bcd8739ae039","arr","len","arr2","$df1ca92cc1bcaedc$export$2e2bcd8739ae039","o","minLen","n","prototype","toString","call","slice","constructor","name","test","$3b220a588ec3da93$export$2e2bcd8739ae039","isArray","$5a64e8e9053d798d$export$2e2bcd8739ae039","TypeError","$17a40186ea415ec4$export$2e2bcd8739ae039","$6d9bc935a1ae1c4c$export$885d3f877b02ad5e","$3ebd66757e8b5e31$export$110700823644f4a6","value","options","cookieString","days","date","Date","setTime","getTime","toGMTString","document","location","protocol","cookie","$04b89f2528e866a7$var$CookiePreferences","formSelector","confirmationSelector","radioButtons","instance","Constructor","this","form","querySelector","protoProps","staticProps","b","nameEQ","cookies","split","charAt","substring","indexOf","decodeURIComponent","$3ebd66757e8b5e31$export$4be65e66cfa2648a","policy","essential","settings","usage","campaigns","parsed","JSON","parse","e","getPolicyOrDefault","entries","forEach","param","cookieKey","_param","inputName","_this","boolToValue","valueToBool","json","stringify","$3ebd66757e8b5e31$export$5d0c102c5d7f343d","style","display","addEventListener","evt","preventDefault","setPoliciesCookie","displayConfirmation","window","scrollTo","cookiePreferences","initFormValues","bindForm","$04b89f2528e866a7$export$2e2bcd8739ae039"],"version":3,"file":"cookie-policy-form.js.map"}